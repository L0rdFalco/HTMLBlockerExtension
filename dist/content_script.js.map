{"version":3,"file":"content_script.js","mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAEA;AAAA;AACA;AACA;AACA;AAsBA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAGA;AAEA;AAAA;AAAA;AAGA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAEA;AAAA;AAEA;AAAA;AAAA;AACA;;AAEA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAEA;AAAA;AAIA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAIA;AAAA;AAAA;AACA;AACA;AAEA;AAcA;AACA;AAEA;AACA;AAEA;AAGA;AAEA;AAGA;AAEA;AAEA;AAEA;AACA;AAMA;AAEA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AAGA;AAEA;AAEA;AAGA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAGA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAOA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;;AAEA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AA+BA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AAEA;AAAA;AAAA;AAAA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AAIA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AAEA;AAGA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAGA;AACA;AAAA;AAEA;AAEA;AAEA;AAEA;AAEA;AAEA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAGA;AACA;AAEA;AAEA;AAEA;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://htmlblocker/./node_modules/logging/lib/browser.js","webpack://htmlblocker/webpack/bootstrap","webpack://htmlblocker/webpack/runtime/make namespace object","webpack://htmlblocker/./src/content_script.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n// Super basic browser support just to avoid breaking universal builds.\n// title and log level are not included in the output at this time.\nvar logger = function logger() {\n    var _console;\n\n    return (_console = console).log.apply(_console, arguments);\n};\n\nfunction createLogger() /* title */{\n    return {\n        info: logger,\n        warn: logger,\n        error: logger,\n        debug: logger\n    };\n}\n\nexports.default = createLogger;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","'use strict';\n\nimport createLogger from 'logging';\n\nconst logger = createLogger('csScript');\n\nlogger.info(\"cs start\")\n\nconst cssFinder = (() => { let e, t; function n(n, a) { if (n.nodeType !== Node.ELEMENT_NODE) throw Error(\"Can't generate CSS selector for non-element node type.\"); if (\"html\" === n.tagName.toLowerCase()) return \"html\"; let o = { root: document.body, idName: e => !0, className: e => !0, tagName: e => !0, attr: (e, t) => !1, seedMinLength: 1, optimizedMinLength: 2, threshold: 1e3, maxNumberOfTries: 1e4 }; t = l((e = { ...o, ...a }).root, o); let u = r(n, \"all\", () => r(n, \"two\", () => r(n, \"one\", () => r(n, \"none\")))); if (u) { let f = v(E(u, n)); return f.length > 0 && (u = f[0]), i(u) } throw Error(\"Selector was not found.\") } function l(e, t) { return e.nodeType === Node.DOCUMENT_NODE ? e : e === t.root ? e.ownerDocument : e } function r(t, n, l) { let r = null, i = [], o = t, u = 0; for (; o;) { let s = _(f(o)) || _(...c(o)) || _(...m(o)) || _($(o)) || [p()], h = d(o); if (\"all\" == n) h && (s = s.concat(s.filter(y).map(e => g(e, h)))); else if (\"two\" == n) s = s.slice(0, 1), h && (s = s.concat(s.filter(y).map(e => g(e, h)))); else if (\"one\" == n) { let [N] = s = s.slice(0, 1); h && y(N) && (s = [g(N, h)]) } else \"none\" == n && (s = [p()], h && (s = [g(s[0], h)])); for (let w of s) w.level = u; if (i.push(s), i.length >= e.seedMinLength && (r = a(i, l))) break; o = o.parentElement, u++ } return (r || (r = a(i, l)), !r && l) ? l() : r } function a(t, n) { let l = v(w(t)); if (l.length > e.threshold) return n ? n() : null; for (let r of l) if (u(r)) return r; return null } function i(e) { let t = e[0], n = t.name; for (let l = 1; l < e.length; l++) { let r = e[l].level || 0; n = t.level === r - 1 ? `${e[l].name} > ${n}` : `${e[l].name} ${n}`, t = e[l] } return n } function o(e) { return e.map(e => e.penalty).reduce((e, t) => e + t, 0) } function u(e) { let n = i(e); switch (t.querySelectorAll(n).length) { case 0: throw Error(`Can't select any node with this selector: ${n}`); case 1: return !0; default: return !1 } } function f(t) { let n = t.getAttribute(\"id\"); return n && e.idName(n) ? { name: \"#\" + CSS.escape(n), penalty: 0 } : null } function c(t) { let n = Array.from(t.attributes).filter(t => e.attr(t.name, t.value)); return n.map(e => ({ name: `[${CSS.escape(e.name)}=\"${CSS.escape(e.value)}\"]`, penalty: .5 })) } function s(e) { let t = e.length; return e.match(/[\\-_][a-z0-9]*[0-9]+[a-z0-9]*/i) && (t += 50), e.match(/video|player|embed|^ad/i) && (t -= 75), t } function m(t) { let n = Array.from(t.classList).filter(e.className); n.sort((e, t) => s(e) - s(t)); let l = n.map(e => ({ name: \".\" + CSS.escape(e), penalty: 1 })), r = t.tagName.toLowerCase(); return (r.match(/video|iframe/) && l.unshift({ name: r, penalty: 1 }), l.length) ? h(l, 2).map(e => e.reduce((e, t) => (e.name += t.name, e.penalty += t.penalty, e.level = t.level, e), { name: \"\", penalty: 0 })) : l } function h(e, t = 2) { let n = function (e, t, l, r) { if (0 == e) { l.length > 0 && r.push(l); return } for (let a = 0; a < t.length; a++)n(e - 1, t.slice(a + 1), l.concat([t[a]]), r) }, l = []; for (let r = 0; r < Math.min(e.length, t + 1); r++)n(r, e, [], l); return e.length < t + 1 && l.push(e), l } function $(t) { let n = t.tagName.toLowerCase(); return e.tagName(n) ? { name: n, penalty: 2 } : null } function p() { return { name: \"*\", penalty: 3 } } function d(e) { let t = e.parentNode; if (!t) return null; let n = t.firstChild; if (!n) return null; let l = 0; for (; n && (n.nodeType === Node.ELEMENT_NODE && l++, n !== e);)n = n.nextSibling; return l } function g(e, t) { return { name: e.name + `:nth-child(${t})`, penalty: e.penalty + 10 } } function y(e) { return \"html\" !== e.name && !e.name.startsWith(\"#\") } function _(...e) { let t = e.filter(N); return t.length > 0 ? t : null } function N(e) { return null != e } function* w(e, t = []) { if (e.length > 0) for (let n of e[0]) yield* w(e.slice(1, e.length), t.concat(n)); else yield t } function v(e) { return [...e].sort((e, t) => o(e) - o(t)) } function* E(t, n, l = { counter: 0, visited: new Map }) { if (t.length > 2 && t.length > e.optimizedMinLength) for (let r = 1; r < t.length - 1; r++) { if (l.counter > e.maxNumberOfTries) return; l.counter += 1; let a = [...t]; a.splice(r, 1); let o = i(a); if (l.visited.has(o)) return; u(a) && L(a, n) && (yield a, l.visited.set(o, !0), yield* E(a, n, l)) } } function L(e, n) { return t.querySelector(i(e)) === n } return n })();\n\nconst X = \"!!r33ln00ꓭ\"\nlet shadowElement = null;\nclass ActivationDialog {\n    constructor(shadowRoot, close) {\n        this.elm = document.createElement(\"div\");\n        this.elm.className = \"dialog dialog_advOptions\"\n        this.elm.innerHTML = `\n        <span class=\"header__logo\">Advanced options</span>\n        </div>\n\n        <hr/>\n\n        <div class=\"topButtons\">\n            <div class=\"topButton topButton_close\" title=\"Close\">✖</div>\n        </div>\n\n        <div class=\"advOptions\">\n            <div class=\"advOptions__row\">\n                <button class=\"advOptions__export\">Activate</button>\n                <p class=\"advOptions__rowHelp\">make a small donation to activate extension</p>\n            </div>\n\n            <div class=\"advOptions__row\">\n                <button class=\"advOptions__import\"><input type=\"file\">No thanks</button>\n                <p class=\"advOptions__rowHelp\">id rather not</p>\n            </div>\n        </div>\n    `\n        shadowRoot.appendChild(this.elm)\n\n        this.elm.querySelector(\".topButton_close\").addEventListener(\"click\", (e) => {\n            close() //how does this work?\n            e.preventDefault()\n\n        })\n        this.elm.querySelector(\".advOptions__export\").addEventListener(\"click\", (e) => {\n            // e.preventDefault()\n            window.open(`http://127.0.0.1:3000/donate/${chrome.runtime.id}`)\n\n            close()\n        })\n        this.elm.querySelector(\".advOptions__import input\").addEventListener(\"click\", (e) => {\n\n            // run blocked code\n\n            close()\n        })\n\n    }\n\n    destroy() {\n        this.elm.remove()\n\n    }\n\n}\nconst helpersObj = {\n    escapeHTML: function (str) {\n        return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')\n\n    },\n\n    closest: function (el, selector) {\n\n        var retval = null\n        while (el) {\n            if (el.matches(selector)) {\n                retval = el\n                break\n            }\n            el = el.parentElement\n        }\n        return retval\n\n    },\n\n    getActivationStatus: async function (mainFunc, dialogFunc) {\n\n        const data = await chrome.storage.local.get(\"dId\")\n\n        console.log(\"extracted data: \", data.length);\n\n        if (!data || Object.keys(data).length === 0) {\n            //show dialog\n\n            dialogFunc(ActivationDialog)\n            return\n        }\n\n        const res1 = await fetch(`http://127.0.0.1:3000/buck/status/${data.dId}`)\n\n        const res2 = await res1.json()\n\n\n\n        if (res2.status) {\n            mainFunc()\n        }\n        else {\n            //show dialog\n            dialogFunc(ActivationDialog)\n        }\n    },\n\n}\n\nconst mainObj = {\n    areToolsLoaded: false,\n    areImagesBlocked: false,\n    activeDialog: null,\n    mBlockerDiv: null,\n    maxZ: 2147483647,\n    hiddenElements: [],\n    previewedHiddenSelector: null,\n    hoveredElement: null,\n    markedElement: null,\n    transpose: 0,\n    settings: { remember: true },\n\n\n    getSingleEl: function (q) {\n        if (!this.mBlockerDiv) return null;\n\n        return this.mBlockerDiv.shadowRoot.querySelector(q)\n\n    },\n    getAllElements: function (q) {\n        if (!this.mBlockerDiv) return null;\n        return this.mBlockerDiv.shadowRoot.querySelectorAll(q)\n    },\n    getPathHTML: function (element, transpose) {\n        function getElmName(elm) {\n            if (elm.id) {\n                return \"#\" + elm.id\n            } else if (typeof elm.className == \"string\" && elm.className.trim().length) {\n                return elm.tagName.toLowerCase() + \".\" + elm.className.trim().split(\" \").join(\".\")\n            } else {\n                return elm.tagName.toLowerCase()\n            }\n        }\n\n        let path = []\n        let currentElm = element\n\n        if (currentElm.className == \"blkr_overlay\") { // this is just a proxy for an iframe\n            currentElm = currentElm.relatedElement\n        }\n\n        while (currentElm) {\n            path.push(currentElm)\n            currentElm = currentElm.parentElement\n        }\n\n        path = path.reverse()\n\n        let html = []\n        for (let i = 0; i < path.length; i++) {\n            html.push(`<span class=\"pathNode${path.length - 1 - i == transpose ? \" active\" : \"\"}\">${getElmName(path[i])}</span>`)\n        }\n\n        let editedHTML = html.join('<span class=\"pathSeparator\">&gt;</span>')\n        return editedHTML\n    },\n    getSelector: function (element) {\n        if (!element) return;\n        else if (element.tagName === \"BODY\") return \"body\"\n        else if (element.tagName === \"HTML\") return \"html\"\n\n        return cssFinder(element, { optimizedMinLength: 1 })\n    },\n    injectCSS2Head: function () {\n\n        let cssArr = [\n            `\n            #blkr_wind {\n\t\t\t\tposition: fixed; bottom: 0; right: 10px;\n\t\t\t\tbackground: #fff; box-shadow: 0px 0px 40px rgba(0,0,0,0.15);\n\t\t\t\tborder-radius: 3px 3px 0 0;\n\t\t\t\tz-index: ${this.maxZ};\n            }\n            @media (prefers-color-scheme: dark){\n                #blkr_wind {background: #2b3754; box-shadow: 0px 0px 40px rgba(255,255,255,0.15); }\n            }\n        `\n        ]\n\n        for (let i in this.hiddenElements) {\n            let selector = mainObj.hiddenElements[i].selector;\n\n            if (selector === mainObj.previewedHiddenSelector) {\n                cssArr.push(selector + ' { outline: solid 5px rgba(0,214,255,0.5) !important; outline-offset: -5px; }')\n\n            }\n\n            else if (selector === \"body\" || selector === \"html\") {\n                cssArr.push(selector + '{background: transparent !important; }')\n\n            }\n\n            else {\n                cssArr.push(selector + '{ display: none !important;}')\n\n            }\n\n        }\n\n        if (this.hiddenElements.length) {\n            cssArr.push(`\n            html, html body, html body > #blkr_wind { /* safeguard against \"*\" rules */\n            display: block !important;\n        }\n            `)\n\n        }\n\n        let stylesElement = document.getElementById(\"blkr_styles\");\n\n        if (!stylesElement) { //make one\n            stylesElement = document.createElement(\"style\");\n            stylesElement.id = \"blkr_styles\";\n            stylesElement.type = \"text/css\";\n            document.head.appendChild(stylesElement)\n\n        }\n\n        while (stylesElement.firstChild) {\n            stylesElement.removeChild(stylesElement.firstChild)\n\n        }\n\n        stylesElement.appendChild(document.createTextNode(cssArr.join(\"\\n\")))\n\n    },\n    isChildOfBlkrWind: function (el) {\n        for (let i = 0; i < 8; i++) {\n            if (el === mainObj.mBlockerDiv) return true;\n            el = el.parentNode;\n            if (!el) break;\n        }\n\n        return false;\n\n    },\n    injectHighlighter: function () {\n        if (!mainObj.hoveredElement) return;\n\n        let markedEl = mainObj.hoveredElement;\n\n        if (markedEl.className === \"blkr_overlay\") {\n            markedEl = markedEl.relatedElement; // underlying element\n        }\n\n        let i = 0;\n\n        for (i = 0; i < mainObj.transpose; i++) {\n            if (markedEl.parentNode !== window.document) {\n                markedEl = markedEl.parentNode;\n            }\n            else break\n        }\n\n        mainObj.transpose = i\n\n        if (markedEl === mainObj.markedElement) return;\n\n        mainObj.markedElement = markedEl;\n\n        let highlighterEl = document.querySelector(\"#blkr_highlighter\");\n\n        if (!highlighterEl) {\n            highlighterEl = document.createElement(\"div\");\n            highlighterEl.id = \"blkr_highlighter\";\n            highlighterEl.style.pointerEvents = \"none\";\n            highlighterEl.style.position = \"fixed\";\n            highlighterEl.style.background = 'rgba(255,128,128,0.4)'\n            highlighterEl.style.zIndex = mainObj.maxZ - 1;\n\n            document.body.appendChild(highlighterEl);\n\n        }\n\n        cbObj.updateHighlighterPosition()\n\n        mainObj.getSingleEl(\"#blkr_current_elm\").innerHTML = mainObj.getPathHTML(mainObj.hoveredElement, mainObj.transpose)\n        mainObj.getSingleEl(\"#blkr_current_elm .pathNode.active\").scrollIntoView({ block: \"center\" })\n\n\n    },\n    removeHighlighter: function () {\n        document.querySelector(\"#blkr_highlighter\")?.remove();\n        mainObj.markedElement = null;\n        mainObj.hoveredElement = null;\n        mainObj.getSingleEl(\"#blkr_current_elm\").innerHTML = \"Move mouse pointer to the unwanted element. Click it to remove!\"\n\n    },\n    toggleBlockerTools: function () {\n\n        this.areToolsLoaded ? this.removeBlockingTools() : this.loadBlockingTools()\n    },\n    updateRemBxSetting: function () {\n        this.getSingleEl(\"#rmbr_checkbox\").innerHTML = this.settings.remember ? \"<input type='checkbox' checked>\" : \"<input type='checkbox' unchecked>\"\n\n    },\n    injectOverlays: function () {\n\n        for (let e of document.querySelectorAll(\"iframe\", \"embed\")) {\n            let rect = e.getBoundingClientRect();\n\n            let overlayEl = document.createElement(\"div\");\n            overlayEl.className = \"blkr_overlay\";\n            overlayEl.style.position = \"absolute\";\n            overlayEl.style.left = rect.left + window.scrollX + \"px\";\n            overlayEl.style.top = rect.top + window.scrollY + \"px\";\n            overlayEl.style.width = rect.width + \"px\";\n            overlayEl.style.height = rect.height + \"px\";\n            overlayEl.style.background = 'rgba(128,128,128,1)';\n            overlayEl.style.zIndex = this.mazZ - 2;\n            overlayEl.relatedElement = e;\n\n            document.body.appendChild(overlayEl)\n        }\n\n    },\n    updateElementsListUI: function () {\n        if (!this.mBlockerDiv) return;\n\n        let elementListEl = this.getSingleEl(\"#blkr_elm_list\");\n        let lines = [];\n        if (this.hiddenElements.length) {\n            lines.push('<table><tr class=\"bl_heading\"><td>Removed element(s)</td><td>Remember?</td><td></td></tr>');\n            for (let elm of mainObj.hiddenElements) {\n                lines.push(`\n                <tr>\n\t\t\t\t\t<td class=\"bl_selector\"><a href=\"\" class=\"bl_edit_selector\">edit</a>${helpersObj.escapeHTML(elm.selector)}</td>\n\t\t\t\t\t<td><input type=\"checkbox\"${elm.permanent ? ' checked' : ''}></td>\n\t\t\t\t\t<td><span class=\"bl_preview\">👁</span> <a href=\"\" class=\"bl_delete\">✖</a></td>\n\t\t\t\t</tr>\n                `)\n            }\n\n            lines.push(\"</table>\")\n            elementListEl.classList.add(\"hasContent\")\n\n        }\n\n        else {\n            elementListEl.classList.remove(\"hasContent\")\n\n        }\n\n        elementListEl.innerHTML = lines.join(\"\\n\")\n\n\n        let i = -1;\n\n        for (let tr of this.getAllElements(\"#blkr_elm_list table tr\")) {\n            if (i < 0) {\n                i++;\n                continue;\n            }\n\n            tr.selector = this.hiddenElements[i].selector;\n\n            tr.querySelector(\"input\").addEventListener(\"change\", cbObj.onChangePermanent, false);\n            tr.querySelector(\"a.bl_delete\").addEventListener(\"click\", cbObj.onDeleteClick, false); //block\n            tr.querySelector(\".bl_preview\").addEventListener(\"mouseenter\", cbObj.onPreviewHoverOn, false);\n            tr.querySelector(\".bl_preview\").addEventListener(\"mouseleave\", cbObj.onPreviewHoverOff, false);\n            tr.querySelector(\"a.bl_edit_selector\").addEventListener(\"click\", cbObj.onEditSelector, false);\n\n            i++\n\n\n        }\n\n    },\n    triggerResize: function () {\n\n    },\n    removeOverlays: function () {\n        let overlays = document.querySelectorAll(\"blkr_overlay\")\n        if (!overlays) return;\n        for (let i = 0; i < overlays.length; i++) {\n            let e = overlays[i]\n            e.parentNode.removeChild(e)\n        }\n\n    },\n    refreshOverlays: function () {\n\n        mainObj.removeOverlays()\n        mainObj.injectOverlays()\n\n    },\n\n\n    persistHiddenEls: function () {\n\n        chrome.runtime.sendMessage({\n            action: \"persist_perm_hidden_elms\",\n            website: location.hostname.replace(/^www\\./, ''),\n            data: JSON.stringify(mainObj.hiddenElements.filter(elm => elm.permanent))\n        })\n    },\n    loadHiddenEls: function () {\n\n        chrome.runtime.sendMessage({\n            action: \"extract_perm_hidden_elms\",\n            website: location.hostname.replace(/^www\\./, '')\n        }, function (data) {\n            mainObj.hiddenElements = JSON.parse(data)\n            mainObj.injectCSS2Head();\n            mainObj.updateElementsListUI();\n\n        })\n\n        chrome.runtime.sendMessage({\n\n        }, function (data) {\n\n        })\n\n\n    },\n    deactivateDialog: function () {\n        mainObj.activeDialog?.destroy()\n        mainObj.activeDialog = null\n        mainObj.getSingleEl('.mainWindow').style.removeProperty('display')\n    },\n    activateDialog: function (cls) {\n        console.log(\"activate dialog called\");\n        mainObj.activeDialog = new cls(mainObj.mBlockerDiv.shadowRoot, mainObj.deactivateDialog)\n        mainObj.getSingleEl('.mainWindow').style.display = 'none'\n        mainObj.removeHighlighter()\n        console.log(\"dialog activated\");\n    },\n    toggleImages: function () {\n\n        chrome.runtime.sendMessage({ action: \"toggle_images\" }, (res) => {\n            console.log(\"toggle images res\", res);\n\n        })\n\n        //send images to bg script to block images\n    },\n\n    loadBlockingTools: function () {\n        console.log(\"loading tools\");\n\n        if (!this.mBlockerDiv) this.injectCSS2Head();\n\n        shadowElement = document.createElement(\"div\");\n        shadowElement.setAttribute(\"id\", \"blkr_wind\");\n        shadowElement.attachShadow({ mode: \"open\" });\n        shadowElement.style.visibility = \"hidden\";\n        document.body.appendChild(shadowElement);\n        this.mBlockerDiv = shadowElement;\n\n        shadowElement.shadowRoot.innerHTML =\n            `\n        <link rel=\"stylesheet\" href=\"${chrome.runtime.getURL('content.css')}\">\n        <div class=\"mainWindow\">\n            <div class=\"header\">\n                <span class=\"header__logo\">Point and Click To Block HTML Element\n                </span>\n                <span class=\"header__logo header__logo_small\"> HTML Element Blocker</span>\n            </div>\n            \n            <hr/>\n\n            <div class=\"topButtons\">\n            <div class=\"topButton topButton_hideImages\" title=\"Hide Images\">📸</div>\n\n                <div class=\"topButton topButton_settings\" title=\"feature blocked!\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-settings\"><circle cx=\"12\" cy=\"12\" r=\"3\"></circle><path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path></svg>\n                </div>\n                <div class=\"topButton topButton_minimize\" title=\"Minimize\"><i>➜</i></div>\n                <div class=\"topButton topButton_close\" title=\"Close\">✖</div>\n            </div>\n            <div class=\"settingsRow\">\n                <label>\n                    Remember by default: <span id=\"rmbr_checkbox\">?</span>\n                </label>\n            </div>\n            <div id=\"blkr_current_elm\">Use the mouse to select an element to remove.</div>\n            <div id=\"blkr_elm_list\"></div>\n        </div>\n        `\n\n        this.getSingleEl(\"link\").addEventListener(\"load\", cbObj.onLoadCB)\n\n        this.getSingleEl(\".topButton_hideImages\").addEventListener(\"click\", cbObj.toggleImagesCB)//block\n        this.getSingleEl(\".topButton_close\").addEventListener(\"click\", cbObj.closeBtnCB)//block\n        this.getSingleEl(\".topButton_minimize\").addEventListener(\"click\", cbObj.minimizeCB)\n        this.getSingleEl(\".topButton_settings\").addEventListener(\"click\", cbObj.settingsCB)\n        this.getSingleEl(\"#rmbr_checkbox\").addEventListener(\"click\", cbObj.remCheckboxCB)\n\n        document.addEventListener(\"mouseover\", cbObj.mouseOver, true) // done\n        document.addEventListener(\"mousedown\", cbObj.hideSelectedEl, true) // done\n        document.addEventListener(\"mouseup\", cbObj.preventEvent, true) // done\n        document.addEventListener(\"click\", cbObj.preventEvent, true)// done\n        document.addEventListener(\"scroll\", cbObj.updateHighlighterPosition, true) //done\n\n        this.updateRemBxSetting();//done\n        this.injectOverlays();//done\n        this.updateElementsListUI() // done\n\n        this.areToolsLoaded = true;\n\n        chrome.runtime.sendMessage({ action: \"toolsVisibStatus\", visible: true }) //  message to change the icon\n\n    },\n\n    removeBlockingTools: function () {\n\n        console.log(\"remove blocking tools\");\n        mainObj.deactivateDialog()\n        mainObj.removeHighlighter()\n        mainObj.removeOverlays()\n\n        mainObj.mBlockerDiv.parentNode.removeChild(mainObj.mBlockerDiv)\n        document.removeEventListener(\"mouseover\", cbObj.mouseOver, true) // done\n        document.removeEventListener(\"mousedown\", cbObj.hideSelectedEl, true) // done\n        document.removeEventListener(\"mouseup\", cbObj.preventEvent, true) // done\n        document.removeEventListener(\"click\", cbObj.preventEvent, true)// done\n        document.removeEventListener(\"scroll\", cbObj.updateHighlighterPosition, true) //done\n\n\n        chrome.runtime.sendMessage({ action: \"toolsVisibStatus\", visible: false })\n\n        mainObj.areToolsLoaded = false;\n    },\n\n    init: function () {\n        console.log(\"cs init\");\n        chrome.runtime.onMessage.addListener(cbObj.bgReceiver)\n        this.loadHiddenEls();\n    }\n\n}\nconst cbObj = {\n    onChangePermanent: function (e) {\n        /*\n        \n        console.log(this);\n        console.log(e.target);\n        console.log((e.target.parentElement).parentElement);\n        console.log((e.target.parentNode).parentNode);\n        \n        */\n\n        let tr = helpersObj.closest(this, \"tr\");\n        let i = mainObj.hiddenElements.findIndex((el) => {\n            return el.selector === tr.selector\n        })\n\n        let hiddenEl = mainObj.hiddenElements[i]\n\n        hiddenEl.permanent = this.checked\n\n        mainObj.persistHiddenEls()\n\n    },\n\n\n\n    onPreviewHoverOn: function (e) {\n        let selector = helpersObj.closest(this, \"tr\").selector\n\n        if (!selector) return;\n        mainObj.previewedHiddenSelector = selector;\n        mainObj.injectCSS2Head();\n\n    },\n\n    onPreviewHoverOff: function (e) {\n        let selector = helpersObj.closest(this, \"tr\").selector;\n        if (!selector) return;\n\n        console.log(selector, mainObj.previewedHiddenSelector);\n\n        if (mainObj.previewedHiddenSelector == selector) {\n            mainObj.previewedHiddenSelector = null;\n            mainObj.injectCSS2Head()\n        }\n\n    },\n\n    onEditSelector: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        let tr = closest(this, 'tr')\n\n        if (tr.selector) {\n            let hiddenElement = mainObj.hiddenElements.find(elm => elm.selector == tr.selector)\n            let newSelector = prompt('Customize CSS selector\\n\\nhints:\\n[id^=\"Abc\"] matches #AbcWhatever\\n[class*=\"Abc\"] matches .somethingAbcSomething', hiddenElement.selector)\n            if (newSelector) {\n                hiddenElement.selector = newSelector\n\n                mainObj.updateCSS()\n                mainObj.refreshOverlays()\n                mainObj.updateElementsListUI()\n                mainObj.updateSavedElements()\n            }\n        }\n\n    },\n\n    bgReceiver: function (msg, sender, sendResponse) {\n        if (msg.action === \"getStatus\") {\n\n            sendResponse(mainObj.areToolsLoaded)\n\n        }\n\n        else if (msg.action === \"toggle\") {\n            mainObj.toggleBlockerTools()\n\n            sendResponse(X)\n\n        }\n\n    },\n    mouseOver: function (e) {\n        if (mainObj.activeDialog) return null;\n        if (mainObj.isChildOfBlkrWind(e.target)) {\n            return mainObj.removeHighlighter()\n\n        }\n\n        if (mainObj.hoveredElement !== e.target) {\n            mainObj.transpose = 0;\n            mainObj.hoveredElement = e.target;\n            mainObj.injectHighlighter()\n\n        }\n\n    },\n    hideSelectedEl: function (e) {\n        if (!e) return;\n        if (!mainObj.markedElement) return;\n        if (e.target && mainObj.isChildOfBlkrWind(e.target)) return;\n\n        let selector = mainObj.getSelector(mainObj.markedElement)\n\n        if (!selector) return;\n\n        if (e && (e.button !== 0)) {\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n\n        mainObj.removeHighlighter();\n\n        mainObj.hiddenElements.push({\n            selector: selector,\n            permanent: mainObj.settings.remember\n        })\n\n        mainObj.injectCSS2Head() // what actually causes element to disappear\n        mainObj.updateElementsListUI();// update blocker window with hidden elements\n        mainObj.triggerResize()//?\n        mainObj.refreshOverlays();//to redraw overlays on the resized window?\n        mainObj.persistHiddenEls()// save permanent elements to storage\n\n        e?.preventDefault();\n        e?.stopPropagation();\n\n\n    },\n    preventEvent: function (e) {\n        if (mainObj.isChildOfBlkrWind(e.target)) return;\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n\n    },\n    updateHighlighterPosition: function () {\n        let rect = mainObj.markedElement?.getBoundingClientRect();\n\n        if (!rect) return;\n\n        let highlighterEl = document.querySelector(\"#blkr_highlighter\");\n        if (!highlighterEl) return;\n\n        highlighterEl.style.left = rect.x + \"px\";\n        highlighterEl.style.top = rect.y + \"px\";\n        highlighterEl.style.width = rect.width + \"px\";\n        highlighterEl.style.height = rect.height + \"px\";\n\n\n    },\n\n    remCheckboxCB: (e) => {\n        e.preventDefault()\n        mainObj.settings.remember = !mainObj.settings.remember;\n        mainObj.persistHiddenEls()\n        mainObj.updateElementsListUI()\n    },\n    settingsCB: (e) => {\n        e.preventDefault()\n        mainObj.activateDialog(ActivationDialog)\n\n    },\n    minimizeCB: (e) => {\n        e.preventDefault()\n\n        mainObj.getSingleEl(\".mainWindow\").classList.toggle(\"minimized\")\n\n    },\n    closeBtnCB: (e) => {\n        e.preventDefault()\n\n        let func = () => {\n            mainObj.removeBlockingTools()\n        }\n\n        helpersObj.getActivationStatus(func, mainObj.activateDialog)\n\n    },\n    toggleImagesCB: (e) => {\n        e.preventDefault()\n\n        let func = () => {\n            mainObj.toggleImages()\n        }\n\n        helpersObj.getActivationStatus(func, mainObj.activateDialog)\n\n\n    },\n    onDeleteClick: function (e) {\n\n        e.preventDefault()\n\n        console.log(\"delete\");\n\n        let func = () => {\n\n            let tr = helpersObj.closest(this, \"tr\")\n\n            if (tr.selector) {\n\n                let i = mainObj.hiddenElements.findIndex(elm => elm.selector === tr.selector);\n                mainObj.hiddenElements.splice(i, 1)\n            }\n\n            mainObj.injectCSS2Head()\n            mainObj.refreshOverlays()\n            mainObj.updateElementsListUI()\n            mainObj.persistHiddenEls()\n\n            e.preventDefault();\n            e.stopPropagation();\n        }\n\n        helpersObj.getActivationStatus(func, mainObj.activateDialog)\n\n\n    },\n    onLoadCB: () => {\n\n        shadowElement.style.visibility = \"visible\"\n\n    }\n\n}\n\nmainObj.init()\n\n/*\n    mainObj.activateDialog(ActivationDialog) is used to bring up the dialog\n\n    block the following:\n    images,\n    close,\n    bl_delete\n\n*/\n\n"],"names":[],"sourceRoot":""}